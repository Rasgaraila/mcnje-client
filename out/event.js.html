<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>
        One's Craft: Source: event.js
    </title>
    <script src="scripts/prettify/prettify.js">
    </script>
    <script src="scripts/prettify/lang-css.js">
    </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>
    <div id="main">
        <h1 class="page-title">Source: event.js</h1>
        



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * event.js - Copyright (C) 2017-2018
 *
 * A event system.
 *
 * File is licenced under project's global licence.
 * See Licence.txt for more details.
 */
/**
 * @file A event system
 * @module event
 * @author Redcrafts group and Contributors
 */
/**
 * EventHandlers - A list of eventHandlers
 *
 * @extends Array
 */
class EventHandlers extends Array {
    /**
     * remove - remove a element from EventHandlers
     *
     * @param {number} id The Id of element to remove
     * @returns {boolean} The status of action
     */
    remove(id = argError("id", 1, "NUM")) {
        var rest;
        if (typeof id === "number") {
            rest = id.splice(id + 1, this.length - (id + 1));
            this.length = id + 1;
            rest.map(each => (this.push(each)));
            return true;
        }
        return false;
    }

    /**
     * removeAll - Remove all elements from EventHandlers
     *
     * @see {@link EventHandlers} The parent class
     * @returns {boolean} the status of action
     */
    removeAll() {
        this.length = 0;
        return this.length === 0;
    }
}

/**
 * Event - Generates a event
 *
 * @see {@link EventHandlers} The required class
 */
class Event {
    constructor() {
        this.handlers = new EventHandlers();
    }

    /**
     * remove - remove a element from EventHandlers
     *
     * @see {@link EventHandlers} The related class
     * @param {number} id The Id of element to remove
     * @returns {boolean} The status of action
     */
    remove(id = argError("id", 1, "NUM")) {
        return this.handlers.remove(id);
    };

    /**
     * removeAll - Remove all elements from EventHandlers
     *
     * @see {@link EventHandlers} The related class
     * @returns {boolean} the status of action
     */
    removeAll() {
        return this.handlers.removeAll();
    };

    /**
     * call - Calls all handlers
     *
     * @see {@link EventHandlers} The related class
     * @param {*} id If id is number,
     * The specific element will be called,
     * But if not,
     * All of elements will be called (Note: then the id is also a argument)
     * @param {*} args [REST] The argument for handlers be called
     * @returns {*} Returns either the last function"s return value,
     * Or false, if the last function didnt responded.
     */
    call(id, ...args) {
        var res;
        if (typeof id === "number")
            res = this.handlers[id].apply({
                prev: null,
                calledSelf: true
            }, args);
        else
            res = this.handlers.reduce((acc, cur) => {
                return cur.apply({
                    prev: acc,
                    calledSelf: false
                }, [id, ...args]);
            }, null);
        return res || false;
    };

    /**
     * add - Adds a event listener
     *
     * @see {@link EventHandlers} The related class
     * @param {function} handler The handler to add
     * @returns {boolean} The action status
     */
    add(handler = argError("handler", 1, "FUNC")) {
        if (typeof handler === "function") {
            this.handlers.push(handler);
            return true;
        }
        return false;
    };

    /**
     * length - Gets the length of the Handlers
     *
     * @returns {number}
     */
    length() {
        return this.handlers.length;
    };

    /**
     * exports - Exports the EventHandlers for external usage
     *
     * @returns {array}
     */
    exports() {
        return new EventHandlers(...this.handlers);
    };

    /**
     * imports - Imports the exported EventHandlers
     *
     * @param {array} handlers
     * @returns {boolean}
     */
    imports(handlers = argError("handlers", 1, "OBJ")) {
        this.handlers = handlers;
        return true;
    };
}

/**
 * argError - internal error invocation
 * related to arguments not specified
 *
 * @private
 * @param {string} name The name of Argument
 * @param {number} pos The position of Argument
 * @param {*} args [REST] Additional Texts to be included
 */
function argError(name, pos, ...args) {
    throw new Error(`
The required argument ${name}\
at position ${pos} is not defined. ${args.join(" ")}
`.trim());
}

module.exports = Event;
</code></pre>
        </article>
    </section>




    </div>
    <nav>
        <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-event.html">event</a></li><li><a href="module-tester.html">tester</a></li></ul><h3>Classes</h3><ul><li><a href="module-event-Event.html">Event</a></li><li><a href="module-event-EventHandlers.html">EventHandlers</a></li><li><a href="module-tester-Tester.html">Tester</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-getting-started.html">getting-started</a></li></ul>
    </nav>
    <br class="clear">
    <footer>
        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
        
    </footer>
    <script>
        prettyPrint();
    </script>
    <script src="../scripts/linenumber.js">
    </script>
</body>

</html>
