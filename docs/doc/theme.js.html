<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: theme.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: theme.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * theme.js - Copyright (C) 2017-2018
 *
 * Generates theme.css.
 *
 * File is licenced under project's global licence.
 * See Licence.txt for more details.
 */
/**
 * @module theme
 */
const errors = require("./errors.js"),
    filename = "theme.js";

try {
    const fontColorContrast = require("font-color-contrast"),
        winTbColor = require("windows-titlebar-color"),
        Color = require("color");
} catch (err) {
    throw new errors.LoadingError(filename);
}

try {
    /**
     * Theme - Generates theme.css.
     * @extends Color
     */
    class Theme extends Color {
        /**
         * @param {string} [color=""] The hex Color.
         * @throws {InternalError}
         */
        constructor(color = "") {
            try {
                winTbColor.reload();
                if (color === "") {
                    if (winTbColor.isSupported)
                        color = winTbColor.accentData.ColorizationColor;
                    else
                        color = "#8bc34a";
                    this.isaccent = true;
                }
                super(color);
                gen();
            } catch (err) {
                throw new errors.InternalError(filename);
            }
        }

        /**
         * reload - Will reload
         *
         * @returns {Object} This.
         * @throws {RuntimeError}
         * @throws {DepError}
         */
        reload() {
            try {
                let color;
                try {
                    winTbColor.reload();
                } catch (err) {
                    throw new errors.DepError(filename);
                }
                if (!this.isaccent)
                    return this;
                if (winTbColor.isSupported)
                    color = winTbColor.accentData.ColorizationColor;
                else
                    color = "#8bc34a";
                gen();
                return this;
            } catch (err) {
                throw new errors.RuntimeError(filename);
            }
        }

        /**
         * gen - Generates Background, Hover and Active Colors
         *
         * @returns {Object} This.
         * @throws {DepError}
         */
        gen() {
            try {
                this.backColor = this.hex();

                if (!(winTbColor.accentData.ColorPrevalence) ||
                    (this.hex() === "#000000") ||
                    (this.hex() === "#FFFFFF"))
                    this.backColor = new Color("#808080");
                else
                    this.backColor = (fontColorContrast(this.hex()) ===
                        "#000000") ? this.lighten(0.5).rgb() : this.darken(0.5).rgb();

                this.hoverColor = (fontColorContrast(this.hex()) ===
                    "#000000") ? this.backColor.lighten(0.1).rgb() : this.backColor.darken(0.1).rgb();
                this.activeColor = (fontColorContrast(this.hex()) ===
                    "#000000") ? this.backColor.lighten(0.2).rgb() : this.backColor.darken(0.2).rgb();
            } catch (err) {
                throw new errors.DepError(filename);
            }
        }

        /**
         * css - Css output for Color; Involving Foreground, Background,
         * Hover and Active colors.
         * @returns {String}
         * @throws {EnvError}
         */
        css() {
            try {
                return `
.fore, .side-self {
    background-color: ${this.hex()};
}
.back, .side-other {
    background-color: ${this.backColor.hex()};
}
.ishover, .onhover:hover, .side-other:hover {
    background-color: ${this.hoverColor.hex()};
}
.isactive, .onactive:active, .side-other:active {
    background-color: ${this.activeColor.hex()};
}
.text {
    color: ${fontColorContrast(this.hex()).toUpperCase()};
}
.colored, .colored-after:after, .colored-before:before {
    background-color: ${fontColorContrast(this.hex()).toUpperCase()};
}
.${(fontColorContrast(this.hex()) === "#000000") ? "white" : "black"} {
    display: none;
}
                `.trim();
            } catch (err) {
                throw new errors.EnvError(filename);
            }
        }
    }
} catch (err) {
    throw new errors.EnvError(filename);
}

module.exports = theme;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-errors.html">errors</a></li><li><a href="module-lang.html">lang</a></li><li><a href="module-theme.html">theme</a></li></ul><h3>Classes</h3><ul><li><a href="module-errors-ArgsError.html">ArgsError</a></li><li><a href="module-errors-DepError.html">DepError</a></li><li><a href="module-errors-EnvError.html">EnvError</a></li><li><a href="module-errors-ExternalError.html">ExternalError</a></li><li><a href="module-errors-InternalError.html">InternalError</a></li><li><a href="module-errors-LoadingError.html">LoadingError</a></li><li><a href="module-errors-RuntimeError.html">RuntimeError</a></li><li><a href="module-lang-FileLoader.html">FileLoader</a></li><li><a href="module-lang-Lang.html">Lang</a></li><li><a href="module-theme-Theme.html">Theme</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-getting-started.html">getting-started</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
